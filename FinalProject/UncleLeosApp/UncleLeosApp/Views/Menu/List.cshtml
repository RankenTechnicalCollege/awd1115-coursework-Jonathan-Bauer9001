@model List<UncleLeosApp.Models.Product>
@{
    ViewData["Title"] = "Menu";
    var categories = Model.Select(p => p.Category.CategoryName).Distinct().ToList();
}
<style>
    .list-group-item.active {
        background-color: red;
        color: #fff;
        border-color: red;
    }
    #pageHead {
        text-align: center;
        font-family: "Pacifico", cursive, sans-serif;
        margin-top: 20px;
	}
    h4 {
		font-family: "Pacifico", cursive, sans-serif;
        margin-top: 40px;
        border-bottom: 2px solid #ddd;
        padding-bottom: 10px;
	}
</style>

<h1 id="pageHead">Menu</h1>
<div class="container my-5">
    <div class="row">
        <div class="col-sm-3 col-lg-2">
            <h3>Categories</h3>
            <div id="categoryList" class="list-group">
                @for (int i = 0; i < categories.Count; i++)
                {
                    <a class="list-group-item list-group-item-action" href="#list-item-@(i + 1)">@categories[i]</a>
                }
            </div>
        </div>
        <div class="col-sm-9 col-lg-10">
            <div data-bs-spy="scroll" data-bs-target="#categoryList" data-bs-smooth-scroll="true" class="scrollspy-example" tabindex="0" style="position: relative; height: 60dvh; overflow: auto;">
                <div class="d-flex flex-wrap gap-3">
                @for (int i = 0; i < categories.Count; i++)
                {
                    <h4 class="col-12" id="list-item-@(i + 1)">@categories[i]</h4>
                    @foreach (var product in Model.Where(p => p.Category.CategoryName == categories[i]))
                    {
                        <div class="ps-lg-4 list-group-item" style="border: none; padding: 0;">
                            <div class="card shadow" style="width: 18rem; min-height: 280px; display: flex; flex-direction: column;">
                                <img class="card-img-top" src="~/images/@product.ProductImage" alt="Card image cap" style="height: 100px; object-fit: cover;">
                                <div class="card-body" style="flex: 1 1 auto; display: flex; flex-direction: column;">
                                    <h5 class="card-title">@product.ProductName</h5>
                                    <p class="card-text" style="overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">@product.ProductDescription</p>
                                    <div style="margin-top: auto;">
                                        <a asp-controller="Menu" asp-action="Detail" asp-route-id="@product.ProductId" asp-route-slug="@product.Slug" class="btn btn-secondary">More Info</a>
                                        <form asp-controller="OnlineOrder" asp-action="AddToOrder" asp-route-id="@product.ProductId" method="post" style="display:inline;">
                                            <button type="submit" class="btn btn-danger">Order Online</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
                </div>
            </div>
        </div>
    </div>
</div>